(this.webpackJsonpfuckfd=this.webpackJsonpfuckfd||[]).push([[0],{10:function(e,t,r){e.exports=r(17)},15:function(e,t,r){},16:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(9),i=r.n(o),s=(r(15),r(2)),c=(r(16),r(3)),l=r(1),f=r(7),u=r(6);function d(e){return new Set(Object(c.a)(e))}function v(e,t){return new Set([].concat(Object(c.a)(e),Object(c.a)(t)))}function y(e,t){return new Set(Object(c.a)(e).filter((function(e){return t.has(e)})))}function p(e,t){return new Set(Object(c.a)(e).filter((function(e){return!t.has(e)})))}function h(e,t){var r,n=Object(l.a)(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(!t.has(a))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}function m(e,t){return h(e,t)&&h(t,e)}var b=function(){function e(t,r){Object(f.a)(this,e),this.from=t,this.to=r}return Object(u.a)(e,[{key:"toString",value:function(){return Array.from(this.from).join("")+"->"+Array.from(this.to).join("")}},{key:"isTrivial",get:function(){return h(this.to,this.from)}}],[{key:"parse",value:function(t){var r=t.split("->",2),n=Object(s.a)(r,2),a=n[0],o=n[1];return new e(new Set(a.trim()),new Set(o.trim()))}}]),e}();function j(e){var t,r=[],n=Object(l.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push(Object(c.a)(a))}}catch(o){n.e(o)}finally{n.f()}return r}var O=function(){function e(t){Object(f.a)(this,e),this.properties=void 0,this.fds=void 0,this.fds=new Set;var r,n=Object(l.a)(t);try{for(n.s();!(r=n.n()).done;){var a,o=r.value,i=Object(l.a)(o.to);try{for(i.s();!(a=i.n()).done;){var s=a.value;this.fds.add(new b(o.from,new Set([s])))}}catch(y){i.e(y)}finally{i.f()}}}catch(y){n.e(y)}finally{n.f()}this.properties=new Set;var c,u=Object(l.a)(t);try{for(u.s();!(c=u.n()).done;){var d=c.value;this.properties=v(this.properties,d.from),this.properties=v(this.properties,d.to)}}catch(y){u.e(y)}finally{u.f()}}return Object(u.a)(e,null,[{key:"parse",value:function(t){var r,n=t.split(","),a=new e(new Set(n.filter((function(e){return e.includes("->")})).map(b.parse))),o=n.filter((function(e){return!e.includes("->")})),i=Object(l.a)(o);try{for(i.s();!(r=i.n()).done;){var s,c=r.value,f=Object(l.a)(c);try{for(f.s();!(s=f.n()).done;){var u=s.value;a.addProperty(u)}}catch(d){f.e(d)}finally{f.f()}}}catch(d){i.e(d)}finally{i.f()}return a}}]),Object(u.a)(e,[{key:"addProperty",value:function(e){this.properties.add(e)}},{key:"addFD",value:function(e){var t,r=Object(l.a)(e.to);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.fds.add(new b(e.from,new Set(n)))}}catch(a){r.e(a)}finally{r.f()}}},{key:"propertyClosure",value:function(e){for(var t=new Set(Object(c.a)(e)),r=1;;){var n,a=Object(l.a)(this.fds);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,s=!0,f=Object(l.a)(i.from);try{for(f.s();!(o=f.n()).done;){var u=o.value;if(!t.has(u)){s=!1;break}}}catch(p){f.e(p)}finally{f.f()}if(s){var d,v=Object(l.a)(i.to);try{for(v.s();!(d=v.n()).done;){var y=d.value;t.add(y)}}catch(p){v.e(p)}finally{v.f()}}}}catch(p){a.e(p)}finally{a.f()}if(t.size===r)break;r=t.size}return t}},{key:"canDecide",value:function(e,t){return h(t,this.propertyClosure(e))}},{key:"toString",value:function(){return Array.from(this.fds).join(",")}},{key:"toThirdNF",value:function(){var t,r=e.minify(this).result,n=this.candidateKeys.result,a=new Map,o=Object(l.a)(r.fds);try{var i=function(){var e=t.value,r=Array.from(a.keys()).find((function(t){return m(t,e.from)}));void 0!==r?a.set(r,v(a.get(Array.from(a.keys()).find((function(t){return m(t,e.from)}))),e.to)):a.set(e.from,e.to)};for(o.s();!(t=o.n()).done;)i()}catch(g){o.e(g)}finally{o.f()}var c,f=new Set,u=Object(l.a)(a);try{for(u.s();!(c=u.n()).done;){var d,y=Object(s.a)(c.value,2),p=v(y[0],y[1]),b=!1,j=Object(l.a)(f);try{for(j.s();!(d=j.n()).done;){if(m(d.value,p)){b=!0;break}}}catch(g){j.e(g)}finally{j.f()}b||f.add(p)}}catch(g){u.e(g)}finally{u.f()}var O,k=!1,w=Object(l.a)(f);try{for(w.s();!(O=w.n()).done;){var E,S=O.value,A=Object(l.a)(n);try{for(A.s();!(E=A.n()).done;){if(h(E.value,S)){k=!0;break}}}catch(g){A.e(g)}finally{A.f()}}}catch(g){w.e(g)}finally{w.f()}return k||f.add(Array.from(n)[0]),new Set(Array.from(f).map((function(t){var r=new e(new Set);return r.properties=t,r})))}},{key:"candidateKeys",get:function(){var e,t=new Set,r=new Set,n=Object(l.a)(this.fds);try{for(n.s();!(e=n.n()).done;){var a=e.value;t=v(t,a.to),r=v(r,a.from)}}catch(h){n.e(h)}finally{n.f()}var o=p(this.properties,t),i=p(t,r),s=p(p(this.properties,o),i),c=new Set;if(this.propertyClosure(o).size===this.properties.size)c.add(o);else{var f,u=Object(l.a)(s);try{for(u.s();!(f=u.n()).done;){var d=f.value,y=v(o,new Set([d]));this.propertyClosure(y).size===this.properties.size&&c.add(y)}}catch(h){u.e(h)}finally{u.f()}}return{result:c,mustHave:o,mustNotHave:i,possibleToHave:s}}},{key:"keyAttributes",get:function(){return new Set(Array.from(this.candidateKeys.result).reduce((function(e,t){return v(e,t)})))}},{key:"secondNF",get:function(){var e,t=this.keyAttributes,r=this.candidateKeys.result,n=Object(l.a)(this.properties);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(!t.has(a)){var o,i=Object(l.a)(r);try{for(i.s();!(o=i.n()).done;){var s,c=o.value,f=Object(l.a)(c);try{for(f.s();!(s=f.n()).done;){var u=s.value,v=d(c);if(v.delete(u),this.canDecide(v,new Set(a)))return!1}}catch(y){f.e(y)}finally{f.f()}}}catch(y){i.e(y)}finally{i.f()}}}}catch(y){n.e(y)}finally{n.f()}return!0}},{key:"thirdNF",get:function(){if(!this.secondNF)return!1;var e,t=this.candidateKeys.result,r=this.keyAttributes,n=Object(l.a)(this.fds);try{for(n.s();!(e=n.n()).done;){var a,o=e.value,i=!1,s=Object(l.a)(t);try{for(s.s();!(a=s.n()).done;){if(h(a.value,o.from)){i=!0;break}}}catch(d){s.e(d)}finally{s.f()}if(!i){var c,f=Object(l.a)(o.to);try{for(f.s();!(c=f.n()).done;){var u=c.value;if(!r.has(u))return!1}}catch(d){f.e(d)}finally{f.f()}}}}catch(d){n.e(d)}finally{n.f()}return!0}},{key:"BCNF",get:function(){if(!this.secondNF)return!1;var e,t=this.candidateKeys.result,r=Object(l.a)(this.fds);try{for(r.s();!(e=r.n()).done;){var n,a=e.value,o=!1,i=Object(l.a)(t);try{for(i.s();!(n=i.n()).done;){if(h(n.value,a.from)){o=!0;break}}}catch(s){i.e(s)}finally{i.f()}if(!o)return!1}}catch(s){r.e(s)}finally{r.f()}return!0}}],[{key:"minify",value:function(e){var t=this.eliminatePropertyProcess(e),r=this.eliminateFDProcess(t.result);return window.minify={eliminateProperty:t.process,eliminateFD:r.process,result:r.result},{eliminateProperty:t.process,eliminateFD:r.process,result:r.result}}},{key:"eliminatePropertyProcess",value:function(t){var r,n=[],a=t.fds,o=d(a),i=Object(l.a)(a);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(s.from.size>1){o.delete(s);var c,f=d(s.from),u=Object(l.a)(s.from);try{for(u.s();!(c=u.n()).done;){var v=c.value;f.delete(v);var y=t.propertyClosure(f),p=h(s.to,y);n.push({oldFD:s,propertyEliminated:v,closureAfterEliminate:y,canEliminate:p}),p||f.add(v)}}catch(m){u.e(m)}finally{u.f()}o.add(new b(f,s.to))}}}catch(m){i.e(m)}finally{i.f()}return{process:n,result:new e(o)}}},{key:"eliminateFDProcess",value:function(t){var r,n=[],a=t.fds,o=d(a),i=Object(l.a)(a);try{for(i.s();!(r=i.n()).done;){var s=r.value;o.delete(s);var c=new e(o).propertyClosure(s.from),f=h(s.to,c);n.push({fd:s,closureAfterEliminate:c,canEliminate:f}),f||o.add(s)}}catch(u){i.e(u)}finally{i.f()}return{process:n,result:new e(o)}}},{key:"isLosslessDecompose",value:function(e,t){var r=!1,n={process:[],rows:[],columns:[]},a=Array.from(t.properties).sort(),o=Array.from(e);n.rows=o,n.columns=a;for(var i=[],s=0;s<o.length;++s){var c,f=o[s],u=[],d=Object(l.a)(a);try{for(d.s();!(c=d.n()).done;){var v=c.value;f.properties.has(v)?u.push("A"):u.push(s+1)}}catch(I){d.e(I)}finally{d.f()}i.push(u)}for(var y=j(i),p=!1;!p;){p=!0;var h,m=Object(l.a)(t.fds);try{for(m.s();!(h=m.n()).done;){for(var b=h.value,O=Array.from(b.to)[0],k=Array.from(b.from).map((function(e){return a.indexOf(e)})),w=[0],E=0;E<o.length-1;++E){w=[E];for(var S=E+1;S<o.length;++S){var A,g=!0,F=Object(l.a)(k);try{for(F.s();!(A=F.n()).done;){var D=A.value;if(i[E][D]!==i[S][D]){g=!1;break}}}catch(I){F.e(I)}finally{F.f()}g&&w.push(S)}if(w.length>=2)break}if(1!==w.length){var N,C=1/0,x=Object(l.a)(w);try{for(x.s();!(N=x.n()).done;){var K=i[N.value][a.indexOf(O)];if("A"===K){C="A";break}C=Math.min(C,K)}}catch(I){x.e(I)}finally{x.f()}var P,z=Object(l.a)(w);try{for(z.s();!(P=z.n()).done;){var H=P.value;i[H][a.indexOf(O)]!==C&&(p=!1,i[H][a.indexOf(O)]=C)}}catch(I){z.e(I)}finally{z.f()}}n.process.push({useFD:b,resultMatrix:j(i)});var M,B=Object(l.a)(i);try{for(B.s();!(M=B.n()).done;){var T,L=M.value,J=!0,W=Object(l.a)(L);try{for(W.s();!(T=W.n()).done;){if("A"!==T.value){J=!1;break}}}catch(I){W.e(I)}finally{W.f()}if(J){p=!0,r=!0;break}}}catch(I){B.e(I)}finally{B.f()}}}catch(I){m.e(I)}finally{m.f()}}return window.lossless=n,{process:n,result:r,initialMatrix:y}}},{key:"preserveFDDecompose",value:function(e,t){var r,n=Object(l.a)(t.fds);try{for(n.s();!(r=n.n()).done;){var a=r.value,o=d(a.from),i=void 0;do{i=!1;var s,c=Object(l.a)(e);try{for(c.s();!(s=c.n()).done;){var f=s.value,u=v(o,y(t.propertyClosure(y(o,f.properties)),f.properties));u.size!==o.size&&(o=u,i=!0)}}catch(p){c.e(p)}finally{c.f()}}while(i);if(!h(a.to,o))return{result:!1,failOnFd:a}}}catch(p){n.e(p)}finally{n.f()}return{result:!0}}}]),e}();var k=function(){var e,t,r=Object(n.useState)(new O(new Set)),o=Object(s.a)(r,2),i=o[0],c=o[1],l=Object(n.useState)(""),f=Object(s.a)(l,2),u=f[0],d=f[1],v=Object(n.useState)(""),y=Object(s.a)(v,2),p=y[0],h=y[1],m=Object(n.useState)(""),b=Object(s.a)(m,2),j=b[0],k=b[1],w=Object(n.useState)(new Set),E=Object(s.a)(w,2),S=E[0],A=E[1];return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("input",{value:u,onChange:function(e){return d(e.target.value)}}),a.a.createElement("button",{onClick:function(){c(O.parse(u.split("-").join("->")))}},"\u786e\u5b9a"),a.a.createElement("div",null,"\u5019\u9009\u952e\uff1a",Array.from(i.candidateKeys.result).map((function(e){return Array.from(e).join("")})).join(","),"\u5173\u952e\u8fc7\u7a0b\uff1a\u5fc5\u6709\uff1a",Array.from(i.candidateKeys.mustHave).join("")," \u53ef\u6709\uff1a",Array.from(i.candidateKeys.possibleToHave).join("")," \u5fc5\u65e0\uff1a",Array.from(i.candidateKeys.mustNotHave).join("")),a.a.createElement("div",null,"\u4e3b\u5c5e\u6027\uff1a",Array.from(i.keyAttributes).join(",")),a.a.createElement("div",null,a.a.createElement("input",{value:p,onChange:function(e){return h(e.target.value)}}),"+ = {"+Array.from(i.propertyClosure(new Set(p.split("")))).join("")+"}"),a.a.createElement("div",null,"Fmin=",O.minify(i).result.toString()),a.a.createElement("div",null,"2NF:",a.a.createElement("input",{type:"checkbox",name:"2nf",checked:i.secondNF,disabled:!0})),a.a.createElement("div",null,"3NF:",a.a.createElement("input",{type:"checkbox",name:"3nf",checked:i.thirdNF,disabled:!0}),!i.thirdNF&&a.a.createElement("p",null,"\u5206\u89e3\u62103NF: ",Array.from(i.toThirdNF()).map((function(e){return Array.from(e.properties).join("")})).join(","))),a.a.createElement("div",null,"BCNF:",a.a.createElement("input",{type:"checkbox",name:"bcnf",checked:i.BCNF,disabled:!0})),a.a.createElement("div",null,a.a.createElement("input",{value:j,onChange:function(e){return k(e.target.value)}}),a.a.createElement("button",{onClick:function(){A(new Set(j.split(",").map(O.parse)))}},"\u786e\u5b9a"),a.a.createElement("div",null,"\u65e0\u635f:",a.a.createElement("input",{type:"checkbox",name:"lossless",checked:O.isLosslessDecompose(S,i).result,disabled:!0}),(t=O.isLosslessDecompose(S,i).process).process.length<1?a.a.createElement("div",null):a.a.createElement("div",null,a.a.createElement("div",null,t.process[t.process.length-1].useFD.toString()),a.a.createElement("div",null,"columns: ",t.columns.join(" ")),a.a.createElement("div",null,"rows: ",t.rows.map((function(e){return Array.from(e.properties).join("")})).join(" ")),t.process[t.process.length-1].resultMatrix.map((function(e){return a.a.createElement("div",null,e.map((function(e){return a.a.createElement("span",null,"A"===e?"a ":"b"+e.toString())})))})))),a.a.createElement("div",null,"\u4fdd\u6301\u51fd\u6570\u4f9d\u8d56:",a.a.createElement("input",{type:"checkbox",name:"keepfd",checked:O.preserveFDDecompose(S,i).result,disabled:!0}),i&&!O.preserveFDDecompose(S,i).result&&a.a.createElement("p",null,"\u6b7b\u5728\u4e86\uff1a",null===(e=O.preserveFDDecompose(S,i).failOnFd)||void 0===e?void 0:e.toString(),"\u4e0a")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.cc15293a.chunk.js.map